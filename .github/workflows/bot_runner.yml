name: Run Telegram Bot 24/7

on:
  # 當你推送程式碼到 main 分支時觸發
  push:
    branches: [ "main" ]
  # 也允許手動觸發
  workflow_dispatch:

jobs:
  run-bot:
    runs-on: ubuntu-latest
    
    steps:
    - name: 檢查程式碼
      uses: actions/checkout@v4
    
    - name: 設定 Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.11'
    
    - name: 安裝依賴套件
      run: |
        pip install -r requirements.txt
    
    - name: 執行 Telegram Bot
      env:
        TELEGRAM_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
        OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
        GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}
        DEEPSEEK_API_KEY: ${{ secrets.DEEPSEEK_API_KEY }}
      run: |
        echo "✅ 開始執行 AI 助理..."
        python main.py
